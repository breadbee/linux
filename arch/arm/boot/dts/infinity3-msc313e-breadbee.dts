// SPDX-License-Identifier: GPL-2.0
/*
 * Copyright (c) 2019 thingy.jp.
 * Author: Daniel Palmer <daniel@thingy.jp>
 */

/dts-v1/;
#include "infinity3-msc313e.dtsi"

/ {
	model = "thingy.jp breadbee";
	compatible = "thingyjp,breadbee", "mstar,infinity3", "mstar,infinity";

	chosen {
		stdout-path = "serial0:115200n8";
		bootargs = "console=ttyS0,115200 root=/dev/mtdblock3 clk_ignore_unused quiet";
	};

	aliases {
		console = &pm_uart;
		ethernet0 = &emac;
	};
	
	leds {
		compatible = "gpio-leds";
		red {
			gpios = <&gpio 20 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "activity";
		};
		yellow {
			gpios = <&gpio 21 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "heartbeat";
		};
	};
};

&pm_uart {
	status = "okay";
};

&emac {
	status = "okay";
};

&isp {
	status = "okay";
	nor: nor@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "jedec,spi-nor";
		reg = <0>;
		spi-max-frequency = <40000000>;
		#include "msc313e-breadbee-partitions.dtsi"
	};
};

&sar {
	status = "okay";
};

&i2c1 {
	status = "okay";
	axp192: pmic@34 {
		compatible = "x-powers,axp192";
		reg = <0x34>;
		interrupts-extended = <&gpio_pm 0 6 IRQ_TYPE_LEVEL_HIGH>;
		
		interrupt-controller;
		#interrupt-cells = <1>;
		
		regulators {
			/* Default work frequency for buck regulators */
			x-powers,dcdc-freq = <1500>;

			reg_dcdc1: dcdc1 {
				regulator-name = "dcdc1";
			};

			reg_dcdc2: dcdc2 {
				regulator-name = "dcdc2";
			};

			reg_dcdc3: dcdc3 {
				regulator-name = "dcdc3";
			};
		};
	};
};
